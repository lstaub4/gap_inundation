# ---- Set up environment ----
library(pacman)
p_load(lidR, ggplot2, sf, terra, tidyverse, rgdal, mapview, here, RCSF)
#Load study area boundary
sen_buff <- st_read("E:/MASTERS/THESIS/data/seneca/senvel90_buff500_proj2.shp")
mapview(sen_buff)
#Montgomery county lidar
mont_lidar <- paste0("E:/MASTERS/THESIS/LIDAR/SEN_MONT2020")
mont_cat<- readLAScatalog(mont_lidar)
st_crs(mont_cat)
plot(mont_cat, mapview=TRUE, map.type="Esri.WorldStreetMap")
plot(mont_cat)
plot(sen_buff, add=TRUE)
#Clip las catalog item to buffer shapefile
opt_output_files(mont_cat) <- paste0("E:/MASTERS/THESIS/data/seneca")
clipped_las<- clip_roi(mont_cat, sen_buff)
#Clip las catalog item to buffer shapefile
opt_output_files(mont_cat) <- paste0("E:/MASTERS/THESIS/data/seneca")
clipped_las<- clip_roi(mont_cat, sen_buff)
plot(clipped_las)
plot(sen_buff, add=TRUE)
#Load Clipped Las file
sen_las<- readLAS(paste0("E:/MASTERS/THESIS/data/seneca/seneca.las"))
#reproject
sen_las_t <- st_transform(sen_las, crs = "epsg:6488")
plot(sen_las)
#Load projected Las file
sen_las<- readLAS(paste0("E:/MASTERS/THESIS/data/seneca/seneca_proj.las"))
#Load DEM
DEM<- raster("F:/MASTERS/THESIS/DEMS/montgomery/2020/Countywide/mont_2020_m.ovr")
p_load(lidR, here, ggplot2, sf, raster, tidyverse, rgdal, ForestTools, ggpubr, ForestGapR, viridis)
#Load DEM
DEM<- raster("F:/MASTERS/THESIS/DEMS/montgomery/2020/Countywide/mont_2020_m.ovr")
st_crs(DEM)
#Load DEM
DEM<- raster("F:/MASTERS/THESIS/DEMS/montgomery/2020/Countywide/mont_2020_m.ovr")
st_crs(DEM)
#Load DEM
DEM<- raster("E:/MASTERS/THESIS/DEMS/montgomery/2020/Countywide/mont_2020_m.ovr")
st_crs(DEM)
load(pacman)
p_load(lidR, terra)
library(pacman)
p_load(lidR, terra)
#Load DSM
DSM<- rast("E:/MASTERS/THESIS/Scripts/DSMs/sen_dsm_pf3_clip.tif")
st_crs(DSM)
crs(DSM)<- "EPSG:2893"
#Load clipped DTM
DTM<- rast("E:/MASTERS/THESIS/TerrainFiles/SenecaTerrainmo/senterr_clip.vrt")
st_crs(DTM)
crs(DTM)<- "EPSG:2893"
plot(DSM)
plot(DTM)
DSM
DSM
DTM
